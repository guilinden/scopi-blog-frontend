<!DOCTYPE html>
<html ng-app="blogClient">
	<head>
    <title>Blog do Guilherme</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js"></script>
    <script src="js/blog.js"></script>
    <meta charset="utf-8"/>
	</head>
  <body ng-controller="BlogController">  

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Blog do Gui</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Alterna navegação">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="#">Artigos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Destaques</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contato</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="main-header">
      <h1 class="title">Blog do Gui</h1>
    </div>

    <div ng-repeat="post in posts" class="posts">
      <div class="text-center">
        <h1>{{post.title}}</h1>
        <h6>Escrito por: {{post.user.name}} as {{post.created_at | date:'dd-MM-yyyy'}} - atualizado em {{post.updated_at | date:'dd-MM-yyyy'}}</h6>
        <span>Tags: </span><a href=""><span ng-repeat="tag in post.tags">{{tag.name}} </span></a>
      </div>
      <p class="postDescription">{{post.description}}</p>

      <div class="commentsSection">
        <h4>Comentários</h4>
        <ul ng-repeat="comment in post.comments">
          <a href=""><span>{{comment.user.name}}</span></a>
          <li class="postComment">{{comment.text}}</li>
          <div ng-if="comment.linked_comments.length" ng-include="'comments.html'"></div>
        </ul>
      </div>
    </div>
    
    <script type="text/ng-template" id="comments.html">
      <ul ng-repeat="comment in comment.linked_comments">
        <a href=""><span>{{comment.user.name}}</span></a>
        <li class="postComment">{{comment.text}}</li>
        <div ng-if="comment.linked_comments.length" ng-include="'comments.html'"></div>
      </ul> 
   </script>
   <div>
    <button class="btnMorePosts" ng-click="getMorePosts()" ng-disabled="isButtonDisabled()">Carregar Mais</button class="btnMorePosts">
   </div>
	</body>
</html>
